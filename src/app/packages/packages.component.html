<app-full-loading-mask *ngIf="!isLoading"></app-full-loading-mask>
<app-header></app-header>
<div class="">
  <div class="row">
    <div class="col-12 mt-5 full-width-bg">
      <h1
        [class]="
          packages.length > 0 ? 'text-center mt-5' : 'text-center mt-5 mb-5'
        "
      >
        Paquetes
      </h1>
      <div *ngIf="packages.length > 0" class="text-center">
        <button class="btn btn-primary mt-2 mb-5" (click)="goToNewPackage()">
          <fa-icon [icon]="faPlusCircle"></fa-icon> Agregar paquete
        </button>
      </div>
    </div>
  </div>
  <div class="row">
    <div
      class="main-container col-12 centered-container"
      *ngIf="packages.length === 0"
    >
      <div class="centered-text">
        <div class="row centered-text">
          <div class="col-12">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="50"
              height="50"
              viewBox="0 0 24 24"
            >
              <path
                d="M24 22.586l-2.823-2.823c.526-.792.836-1.74.836-2.763 0-2.762-2.238-5-5-5s-5 2.238-5 5 2.238 5 5 5c1.016 0 1.957-.307 2.746-.827l2.827 2.827 1.414-1.414zm-9.987-5.586c0-1.654 1.346-3 3-3s3 1.346 3 3-1.346 3-3 3-3-1.346-3-3zm-4 0l.002-.034-3.015 2.175v-13.068l4-2.886v10.247c.508-.854 1.189-1.591 2-2.161v-8.086l4 2.886v3.927h.013c.336 0 .664.032.987.078v-4.007l4-2.479v8.504c1.188 1.208 1.936 2.844 2 4.653v-16.749l-6.455 4-5.545-4-5.545 4-6.455-4v18l6.455 4 3.91-2.82c-.226-.687-.352-1.419-.352-2.18zm-4.013 2.365l-4-2.479v-13.294l4 2.479v13.294z"
              />
            </svg>
          </div>
          <div class="col-12">
            <div class="h4 text-muted">Aun no hay paquetes disponibles</div>
          </div>
          <div class="col-12">
            <button class="btn btn-primary mt-2" (click)="goToNewPackage()">
              <fa-icon [icon]="faPlusCircle"></fa-icon> Crear paquete
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="container mt-2">
      <div class="row mx-3">
        <div class="col-sm-6 p-1" *ngFor="let package of packages">
          <div class="card mb-3 h-100" style="max-width: 540px">
            <div class="row g-0 h-100">
              <div class="col-md-4">
                <img
                  src="https://static.thenounproject.com/png/3314673-200.png"
                  class="img-fluid rounded-start"
                />
              </div>
              <div class="col-md-8 d-flex flex-column">
                <div class="card-body flex-grow-1">
                  <h5 class="card-title">{{ package.packTitle }}</h5>
                  <p class="card-text">
                    {{ truncateText(package.packDescription, 50) }}
                  </p>
                  <p class="card-text">
                    <button class="btn btn-primary btn-sm m-1">Editar</button>
                    <button
                      data-bs-toggle="modal"
                      data-bs-target="#deletePackageModal"
                      class="btn btn-danger btn-sm m-1"
                      (click)="deletingPackage(package.packID)"
                    >
                      <fa-icon [icon]="faTrashAlt"></fa-icon>
                    </button>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <section class="container-with-extra-bottom-margin"></section>
    </div>
  </div>
</div>
<app-footer></app-footer>
<div
  class="modal fade"
  id="deletePackageModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">¿Estás seguro de eliminar este paquete?</div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-outline-danger"
          data-bs-dismiss="modal"
          (click)="deletePackage()"
        >
          Eliminar
        </button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Me equivoqué
        </button>
      </div>
    </div>
  </div>
</div>
